---
title: "00 Flexdashboard Walkthrough"
subtitle: "MKTG 411 Marketing Analytics"
output: 
  ioslides_presentation:
    widescreen: true
---

## Interactive Dashboards (image of dashboard)

<center>

![](~/Work/Dotson%20RA/RA_work/images/flexdashboard_hex.png){width="650px," hieght="500px"}

</center>

## Why Dashboards?

-   Dashboards create an easy way to interpret and report data to others.

    -   Key performance indicators
    -   Data visualizations
    -   Exploring Data

-   Interactive Dashboards allow users to manipulate the data that is used in the visualizations

## Flexdashboard

-   **flexdashboard** is an R package that allows you to easily build dashboards using *Rmarkdown*.

-   Utilizing *shiny* functions in a dashboard will help create interactive dashboards.

## Example Dashboards

(Maybe some images of dashboards so they know what they look like. Or we can use some that I have built before and play around with them just so they get the gist of it like just post a link to one of them)

## Set up

1.  Open a new document in R
2.  Choose drop down and select Rmarkdown
3.  Choose from Template
4.  Select flexdashboard

## Elements of flexdashboard

-   yaml header
-   Layout (columns or rows)
-   Code chunks
-   Charts
-   Sidebar

## YAML Header

-   As an Rmarkdown document, there are addition parameters in the yaml output that make it a flexdashboard that runs shiny:

`flexdashboard::flex_dashboard:`\
`orientation: rows`\
`vertical_layout: scroll`

`runtime: shiny`

## Layout

The yaml header influences the layout of the dashboard

-   orientation is the layout of the charts which can be *columns* or *rows*

-   vertical_layout changes how it fits the web page with *fill* or *scroll* as options

-   Another element of the yaml is *theme*. Changes font, color, etc.

## Making a Column or Row

Columns and Rows are defined by the level 2 markdown header annotation (`-------------`) - Code chunks following the header will show up in that column/row - Data width or height can be modified above header annotation between {} (`{data-width=650px}`)

## Code Chunks

Any code that has an output will be shown in the dashboard.

Data cleaning, manipulation, etc can be performed in the background just showing the data insights on the dashboard by assigning it to an object without printing.

Data Visuals (i.e. graphs and tables) and Rendered elements (i.e. `renderText()` and `renderValue()`) will show on the dashboard.

------------------------------------------------------------------------

Chunks will be given titles by using markdown header (`###`)

Additional code chunks under the column/row header will be included in that column/row

------------------------------------------------------------------------

Example Images of the different layouts

------------------------------------------------------------------------

### Column Orientation

<center>

![](~/Work/Dotson%20RA/RA_work/images/column_orientation.png){width="650px," hieght="500px"}

</center>

------------------------------------------------------------------------

### Row Orientation

<center>

![](~/Work/Dotson%20RA/RA_work/images/row_orientation.png){width="650px," hieght="500px"}

</center>

------------------------------------------------------------------------

### Stack Scrolling

<center>

![](~/Work/Dotson%20RA/RA_work/images/stack_scrolling.png){width="650px," hieght="500px"}

</center>

## Packages

We use the *flexdashboard* and *shiny* packages to access the functions that allow you to build interactive plots in a dashboard.

```{r message=FALSE}
library(tidyverse)
library(flexdashboard)
library(shiny)

mpg

customer_data <- read_csv(here::here("data", "customer_data.csv"))
```

## Adding Charts

Let's add a filter to a simple graph that we made before.

```{r}
mpg %>% 
  filter(manufacturer == "audi") %>% 
  ggplot(aes(x = hwy, y = cty)) +
  geom_jitter(size = 3, alpha = 0.5) +
  geom_smooth(method = "lm", se = FALSE)

customer_data %>%
  # left_join(store_transactions, by = "customer_id") %>% 
  filter(region == "South") %>% 
  mutate(age = 2021 - birth_year) %>% 
  select(age, gender:region) %>%
  ggplot(aes(x = income, fill = gender)) +
  geom_density(alpha = 0.5)
```

## Adding Value Box

Now let's make a value box to call out a particular value that would be interesting

```{r}

summary <- mpg %>%
  filter(manufacturer == "audi") %>% 
  summarize(avg_hwy = mean(hwy))

customer_data %>% 
  filter()

```

---
Now we need the shiny function `valueBox()` which will put our value in a nice call out box.

Use the _icon_ argument to add a favicon.

Also we are rounding the number so there aren't a lot of decimal places
---

```{r}
# valueBox(round(summary,2), icon = "fa-car")
```

------------------------------------------------------------------------

## Note on Shiny functions

They will not show up in your plots tab or in the console. You must knit your document and run the dashboard before being able to see these special functions.

------------------------------------------------------------------------

## Adding a table

```{r}
mpg_summary <- mpg %>%
  group_by(manufacturer) %>%
  summarize(
    n = n(),
    avg_hwy = mean(hwy),
    avg_cty = mean(cty)
  ) %>% 
  arrange(desc(n))
```

------------------------------------------------------------------------

## Making Things Interactive!

Now that we have our basic plot, value box and table we can make it interactive using render functions and a Side bar

------------------------------------------------------------------------

## Input Sidebar

Sidebars are useful for placing input fields that allow you to interact with your data visualization.

You create an input sidebar similar to making a column but add the parameter of `{.sidebar}`. followed by the same markdown header as a column (`----------------`)

## Input Functions

Input functions allow you to make various kinds of inputs that will let you interact with your data.

Components:

-   Input id

-   Input label

-   Choices list

Examples:

-   `selectInput()`

```{r}
# selectInput(
#   "manu_id",
#   "Manufacturer",
#   choices = c(unique(mpg[,1]))
# )
```

------------------------------------------------------------------------

## Wrapping Up

*Summary*

-   How to open a flexdashboard template through Rmarkdown.
-   How to modify the layout of the dashboard.
-   Create an interactive plot using a sidebar and `selectInput()`.

*Next Time*

-   

*Supplementary Material*

-   Flexdashboard for R webpage:

    -   link : \_<https://rmarkdown.rstudio.com/flexdashboard/index.html_>

-   RStudio's Rmarkdown and Flexdashboard Cheatsheets

## Exercise 0

Open the exercise via the RStudio Cloud workspace and do the following.

1.  Load the tidyverse.
2.  Explore `mpg` using the functions we've covered.
3.  Provide a few interesting descriptions (numeric summaries) and visualizations (graphical summaries).
4.  Practice good coding conventions: Comment often, write in consecutive lines of code using the `%>%`, and use the demonstrated style (e.g., variable names, spacing within functions).
5.  Export the R script and upload to Learning Suite.
